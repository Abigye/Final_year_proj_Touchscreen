
# #main interface 
<WindowManager>:
    VideoEx:

    # WelcomePage:
#     EventCategoryWindow: 
    # Inspection:
#     GridWindow1:
#     GridWindow2:
#     IndividualAnimalWindow:
#     CageWindow:
#     RoomLevelWindow:
#     AddEventWindow:

<VideoEx>:
    name: "video"
    GridLayout:
        rows: 3
        spacing: 1.5
        BoxLayout:
            canvas.before:
                Color:
                    rgba: 1, 0, 1 ,0.4
                Rectangle:
                    size: self.size
                    pos: self.pos

            orientation: 'horizontal'
            size_hint: 1, None
            pos_hint: {'top': 1}
            height: 44

            Label:
                height: 24
                text_size: self.width, None
                text: '   Date: ' +  root.my_text

            Label:
                height: 24
                text_size: self.width, None
                text: '   Time: ' + root.my_text_2
        BoxLayout:
            orientation: "vertical"
            VideoPlayer:
                # source: 'rtmp://127.0.0.1/enclosure/live'
                source:'https://www.youtube.com/watch?v=EupAeyL8zAo&ab_channel=ErikSandberg'
                state: 'play'
                options: {'eos':'loop'}
                allow_stretch: True 

        BoxLayout:
            orientation: 'horizontal'
            size_hint: 1, None
            height: 70
            GridLayout:
                cols: 2
                Button: 
                    text: 'Back'
                    pos_hint: {'bottom':1, 'left': 1} 
                    # on_release: 
                    #     app.root.current = "eventgrid"
                    #     root.manager.transition.direction = "right"
                Button: 
                    text: 'Close'
                    pos_hint: {'bottom':1, 'right': 1} 
                    # on_release: 
                    #     app.root.current = "welcome"
                    #     root.manager.transition.direction = "right"
                    # # on_press: root.show_popup_1()

<Inspection>:
    name: "inspect"
    GridLayout:
        rows: 4
        spacing: 1.5
        BoxLayout:
            canvas.before:
                Color:
                    rgba: 1, 0, 1 ,0.4
                Rectangle:
                    size: self.size
                    pos: self.pos

            orientation: 'horizontal'
            size_hint: 1, None
            pos_hint: {'top': 1}
            height: 44

            Label:
                height: 24
                text_size: self.width, None
                text: '   Date: ' + root.my_text

            Label:
                height: 24
                text_size: self.width, None
                text: '  Time: ' + root.my_text_2
        BoxLayout: 
            orientation: 'horizontal'
            size_hint: 1, None
            height: 80
            Label:
                text:'Select Cages Inspected'
                font_size: 20
        BoxLayout:
            orientation: "vertical"
            GridLayout:
                cols: 3
                Label:
                    text:'Cage 1'
                    font_size: 17
                CheckBox:
                    on_active: root.checkbox_click(self,self.active,'Cage 1')
                Button:
                    id:btn_1
                    text:'View'
                    width: 60
                    size_hint_x: None
                    size_hint_y:0.3
                Label:
                    text:'Cage 2'
                    font_size: 17
                CheckBox:
                    on_active: root.checkbox_click(self,self.active,'Cage 2')
                Button:
                    id:btn_2
                    text:'View'
                    width: 60
                    size_hint_x: None
                    size_hint_y:0.3
                Label:
                    text:'Cage 3'
                    font_size: 17
                CheckBox:
                    on_active: root.checkbox_click(self,self.active,'Cage 3')
                Button:
                    id:btn_3
                    text:'View'
                    width: 60
                    size_hint_x: None
                    size_hint_y:0.3
                Label:
                    text:'Cage 4'
                    font_size: 17
                CheckBox:
                    on_active: root.checkbox_click(self,self.active,'Cage 4')
                Button:
                    id:btn_4
                    text:'View'
                    width: 60
                    size_hint_x: None
                    size_hint_y:0.3
                Label:
                    text:'Cage 5'
                    font_size: 17
                CheckBox:
                    on_active: root.checkbox_click(self,self.active,'Cage 5')
                Button:
                    id:btn_5
                    text:'View'
                    width: 60
                    size_hint_x: None
                    size_hint_y:0.3
                Label:
                    text:'Cage 6'
                    font_size: 17
                CheckBox:
                    on_active: root.checkbox_click(self,self.active,'Cage 6')
                Button:
                    id:btn_6
                    text:'View'
                    width: 60
                    size_hint_x: None
                    size_hint_y:0.3
                Label:
                    text:'Cage 7'
                    font_size: 17
                CheckBox:
                    on_active: root.checkbox_click(self,self.active,'Cage 7')
                Button:
                    id:btn_7
                    text:'View'
                    width: 60
                    size_hint_x: None
                    size_hint_y:0.3
                Label:
                    text:'Cage 8'
                    font_size: 17
                CheckBox:
                    on_active: root.checkbox_click(self,self.active,'Cage 8')
                Button:
                    id:btn_8
                    text:'View'
                    width: 60
                    size_hint_x: None
                    size_hint_y:0.3
                Label:
                    text:'Cage 9'
                    font_size: 17
                CheckBox:
                    on_active: root.checkbox_click(self,self.active,'Cage 9')
                Button:
                    id:btn_9
                    text:'View'
                    width: 60
                    size_hint_x: None
                    size_hint_y:0.3
                Label:
                    text:'Cage 10'
                    font_size: 17
                CheckBox:
                    on_active: root.checkbox_click(self,self.active,'Cage 10')
                Button:
                    id:btn_10
                    text:'View'
                    width: 60
                    size_hint_x: None
                    size_hint_y:0.3
                Label:
                    text:'Cage 11'
                    font_size: 17
                CheckBox:
                    on_active: root.checkbox_click(self,self.active,'Cage 11')
                Button:
                    id:btn_11
                    text:'View'
                    width: 60
                    size_hint_x: None
                    size_hint_y:0.3
                Label:
                    text:'Cage 12'
                    font_size: 17
                CheckBox:
                    on_active: root.checkbox_click(self,self.active,'Cage 12')
                Button:
                    id:btn_12
                    text:'View'
                    width: 60
                    size_hint_x: None
                    size_hint_y:0.3
                    # color: ['1','0','1','1']
            BoxLayout:
                orientation: 'horizontal'
                size_hint: 1, None
                height: 90
                GridLayout: 
                    rows: 2
                    Label:
                        id: output_label
                        text:''
                    GridLayout:
                        cols: 2
                        Button: 
                            text: 'Back'
                            pos_hint: {'bottom':1, 'left': 1} 
                            on_release: 
                                app.root.current = "eventgrid"
                                root.manager.transition.direction = "right"
                        Button: 
                            text: 'Finish'
                            pos_hint: {'bottom':1, 'right': 1} 
                            on_release: 
                                app.root.current = "welcome"
                                root.manager.transition.direction = "right"
                            # on_press: root.show_popup_1()




<Pagge>:
    title: 'Popup'
    size_hint: (None, None)
    size: (200, 200)
      
    Label:
        id: text_label
        text: 'Record Saved!'


<Preview>:
    title: 'Preview or Save Record'
    size_hint: (None, None)
    size: (400, 400)
    auto_dismiss:False
    GridLayout:
        rows:6
        Label:
            text: ''
        Label:
            text: ''
        Label:
            id: text_label
            text: 'Do you want to edit record before saving?'
            # \nClick "Edit" to edit file \n"Save" to save file and return to welcome page\n"Record New Event" to save the record and\nrecord a new one'
            font_size:16
        Label:
            text:''
        Label:
            text: '' 
        GridLayout:
            cols:3
            Button:
                text: 'Edit'
                size_hint: .5, .01
                pos_hint: {'bottom':1, 'left': 1} 
                on_release: 
                    root.dismiss_popup()
                    # app.sm.current = app.sm.current()
                    # app.sm.transition.direction = "left"
            Button:
                text:'Save & Exit'
                size_hint: .5, .01
                pos_hint:{'bottom':1, 'right': 1}
                on_press: root.saving_file(app.sm.my_global)
                on_release: 
                    root.dismiss_popup()
                    app.sm.current = "welcome"
                    app.sm.transition.direction = "left"
            Button:
                text: 'Save & New'
                size_hint: .5, .01
                pos_hint:{'bottom':1, 'right': 1} 
                on_press: root.saving_file(app.sm.my_global)
                on_release: 
                    root.dismiss_popup()
                    app.sm.current = "eventgrid"
                    app.sm.transition.direction = "left"
                # background_color: (1.0, 0.0, 1.0, 1.0)


<TimeScheduler>:
    title: 'Set number of minutes to spend in lab'
    size_hint: (None, None)
    size: (400, 400)
    auto_dismiss:False
    GridLayout:
        rows:6
        Label:
            text: ''
        Label:
            id: text_label
            text: 'How much time will you spend in the lab?'
            font_size:16
        TextInput:
            id: timespen
            # text: root.text_input_str
            # text:root.manager.time_spent
            multiline: False        # disable multiline
            hint_text: "Enter numbers only"    # Numbers only
            # input_filter: "float"
        Label:
            text: 'The interface will return to welcome page after 20 mins on\nclicking "Skip"'
            font_size : 12
        Label:
            text: ''
        GridLayout:
            cols:2
            Button:
                text:'Okay'
                size_hint: .5, .01
                pos_hint:{'bottom':1, 'right': 1}
                on_press: root.get_time_to_spent()
                on_release: 
                    root.dismiss_popup_1()
                    app.sm.current = "eventgrid"
                    app.sm.transition.direction = "left"
            Button:
                text: 'Skip'
                size_hint: .5, .01
                pos_hint:{'bottom':1, 'right': 1} 
                # on_press: root.saving_file(app.sm.my_global)
                on_release: 
                    root.dismiss_popup_1()
                    app.sm.current = "eventgrid"
                    app.sm.transition.direction = "left"
                # background_color: (1.0, 0.0, 1.0, 1.0)
               	
	    

    
<WelcomePage>:
    name: "welcome"
    BoxLayout: 
        canvas.before:
            Rectangle:
                size: self.size
                source: "images/bg1.jpg"
    
    Label:
        text: "WELCOME!"
        font_name: "fonts/Lcd.ttf"
        font_size: "100dp"
        color: 0,1,1,1
        pos_hint: {'center_x':.3, 'center_y': 0.55} 
      
    Button:
        text: 'Next'
        size_hint: .1, .08
        pos_hint: {'x':.3, 'y': 0.3} 
        background_color: (1.0, 0.0, 1.0, 1.0)
        on_press: root.get_time()
        # on_press: root.check_current_time()
        on_release: root.show_popup_2()
                    # root.check_current_time()
            # app.root.current = "eventgrid"
            # root.manager.transition.direction = "left"

    #  root.show_popup_1()


<EventCategoryWindow>:
    name: "eventgrid"
    GridLayout:
        rows: 2
        spacing: 1.5
        BoxLayout:
            canvas.before:
                Color:
                    rgba: 1, 0, 1 ,0.4
                Rectangle:
                    size: self.size
                    pos: self.pos

            orientation: 'horizontal'
            size_hint: 1, None
            pos_hint: {'top': 1}
            height: 44

            Label:
                height: 24
                text_size: self.width, None
                text: 'Date: ' + root.my_text

            Label:
                height: 24
                text_size: self.width, None
                text: 'Time: ' + root.my_text_2
        

        BoxLayout: 
            orientation:'horizontal'
            canvas:
                Rectangle:
                    size: self.size
                    source: "images/photo-1585314062604-1a357de8b000.jpeg"
            GridLayout:
                cols: 3
                BoxLayout:
                    orientation:'vertical'
                GridLayout:
                    rows: 8
                    BoxLayout:
                        orientation:'horizontal'

                    BoxLayout:
                        orientation:'horizontal'

                    Button:
                        id:event1
                        text: 'Record Animal Event'
                        on_release: 
                            root.manager.my_global = " ".join(self.text.split()[1:])
                            app.root.current = "grid"
                            root.manager.transition.direction = "left"
            
                    Button:
                        id:event2
                        text: 'Record Cage Event'
                        on_release: 
                            root.manager.my_global = " ".join(self.text.split()[1:])
                            app.root.current = "grid2"
                            root.manager.transition.direction = "left"
                    
                    Button:
                        id:event3
                        text: 'Record Room-Level Event'
                        on_release: 
                            root.manager.my_global = " ".join(self.text.split()[1:])
                            app.root.current = "room"
                            root.manager.transition.direction = "left"

                    Button:
                        id:event4
                        text: 'Inspect Cages'
                        on_release: 
                            root.manager.my_global = self.text
                            app.root.current = "inspect"
                            root.manager.transition.direction = "left"
                    Button:
                        text: 'Add New Event'
                        on_release: 
                            root.manager.my_global = self.text
                            app.root.current = "add"
                            root.manager.transition.direction = "left"
                            
                    # BoxLayout:
                    #     orientation:'horizontal'
                    
                    BoxLayout:
                        orientation:'horizontal'
                BoxLayout:
                    orientation:'vertical'


<GridWindow1>:
    name: "grid"
    BoxLayout:
        canvas.before:
            Color:
                rgba: 0, 0, 0 ,1
            Rectangle:
                size: self.size
                pos: self.pos
    GridLayout:
        rows: 2
        spacing: 1.5
        BoxLayout:
            canvas.before:
                Color:
                    rgba: 1, 0, 1 ,0.4

                Rectangle:
                    size: self.size
                    pos: self.pos

            orientation: 'horizontal'
            size_hint: 1, None
            pos_hint: {'top': 1}
            height: 44

            Label:
                height: 24
                text_size: self.width, None
                text: 'Date: ' + root.my_text

            Label:
                height: 24
                text_size: self.width, None
                text: 'Time: ' + root.my_text_2
        
        GridLayout:
            cols: 3
            padding: 5
            spacing: 3
            Button: 
                text: "1"
                on_release:
                    root.manager.cage_ids = self.text 
                    app.root.current = "animal"
                    root.manager.transition.direction = "left"
            Button: 
                text: "2"
                on_release:
                    root.manager.cage_ids = self.text  
                    app.root.current = "animal"
                    root.manager.transition.direction = "left"
            Button: 
                text: "3"
                on_release: 
                    root.manager.cage_ids = self.text 
                    app.root.current = "animal"
                    root.manager.transition.direction = "left"
            Button: 
                text: "4"
                on_release: 
                    root.manager.cage_ids = self.text 
                    app.root.current = "animal"
                    root.manager.transition.direction = "left"
            Button: 
                text: "5"
                on_release: 
                    root.manager.cage_ids = self.text 
                    app.root.current = "animal"
                    root.manager.transition.direction = "left"
            Button: 
                text: "6"
                on_release:
                    root.manager.cage_ids = self.text  
                    app.root.current = "animal"
                    root.manager.transition.direction = "left"
            Button: 
                text: "7"
                on_release: 
                    root.manager.cage_ids = self.text 
                    app.root.current = "animal"
                    root.manager.transition.direction = "left"
            Button: 
                text: "8"
                on_release:
                    root.manager.cage_ids = self.text  
                    app.root.current = "animal"
                    root.manager.transition.direction = "left"
            Button: 
                text: "9"
                on_release:
                    root.manager.cage_ids = self.text  
                    app.root.current = "animal"
                    root.manager.transition.direction = "left"
            Button: 
                text: "10"
                on_release:
                    root.manager.cage_ids = self.text  
                    app.root.current = "animal"
                    root.manager.transition.direction = "left"
            Button: 
                text: "11"
                on_release:
                    root.manager.cage_ids = self.text  
                    app.root.current = "animal"
                    root.manager.transition.direction = "left"
            Button: 
                text: "12"
                on_release: 
                    root.manager.cage_ids = self.text 
                    app.root.current = "animal"
                    root.manager.transition.direction = "left"


<GridWindow2>:
    name: "grid2"
    BoxLayout:
        canvas.before:
            Color:
                rgba: 0, 0, 0 ,1
            Rectangle:
                size: self.size
                pos: self.pos
    GridLayout:
        rows: 2
        spacing: 1.5
        BoxLayout:
            canvas.before:
                Color:
                    rgba: 1, 0, 1 ,0.4

                Rectangle:
                    size: self.size
                    pos: self.pos

            orientation: 'horizontal'
            size_hint: 1, None
            pos_hint: {'top': 1}
            height: 44

            Label:
                height: 24
                text_size: self.width, None
                text: 'Date: ' + root.my_text

            Label:
                height: 24
                text_size: self.width, None
                text: 'Time: ' + root.my_text_2
        GridLayout:
            cols: 3
            padding: 5
            spacing: 3
            Button: 
                text: "1"
                on_release:
                    root.manager.cage_ids = self.text  
                    app.root.current = "cage"
                    root.manager.transition.direction = "left"
            Button: 
                text: "2"
                on_release: 
                    root.manager.cage_ids = self.text 
                    app.root.current = "cage"
                    root.manager.transition.direction = "left"
            Button: 
                text: "3"
                on_release:
                    root.manager.cage_ids = self.text  
                    app.root.current = "cage"
                    root.manager.transition.direction = "left"
            Button: 
                text: "4"
                on_release: 
                    root.manager.cage_ids = self.text 
                    app.root.current = "cage"
                    root.manager.transition.direction = "left"
            Button: 
                text: "5"
                on_release: 
                    root.manager.cage_ids = self.text 
                    app.root.current = "cage"
                    root.manager.transition.direction = "left"
            Button: 
                text: "6"
                on_release: 
                    root.manager.cage_ids = self.text 
                    app.root.current = "cage"
                    root.manager.transition.direction = "left"
            Button: 
                text: "7"
                on_release:
                    root.manager.cage_ids = self.text  
                    app.root.current = "cage"
                    root.manager.transition.direction = "left"
            Button: 
                text: "8"
                on_release: 
                    root.manager.cage_ids = self.text 
                    app.root.current = "cage"
                    root.manager.transition.direction = "left"
            Button: 
                text: "9"
                on_release:
                    root.manager.cage_ids = self.text  
                    app.root.current = "cage"
                    root.manager.transition.direction = "left"
            Button: 
                text: "10"
                on_release:
                    root.manager.cage_ids = self.text  
                    app.root.current = "animal"
                    root.manager.transition.direction = "left"
            Button: 
                text: "11"
                on_release: 
                    root.manager.cage_ids = self.text 
                    app.root.current = "cage"
                    root.manager.transition.direction = "left"
            Button: 
                text: "12"
                on_release: 
                    root.manager.cage_ids = self.text 
                    app.root.current = "cage"
                    root.manager.transition.direction = "left"


    

<IndividualAnimalWindow>:
    name: "animal"
    cage_number: cage_number
    animal_id: animal_id
    event_category: event_category
    duration: duration
    date: date
    weight: weight
    dosage: dosage
    description: description
    recorded_by: recorded_by
    anim_type: anim_type
    length: length

    BoxLayout:
        canvas.before:
            Color:
                rgba: 0, 0, 0 ,1
            Rectangle:
                size: self.size
                pos: self.pos

    GridLayout:
        rows: 2
        spacing: 1.5
        BoxLayout:
            canvas.before:
                Color:
                    rgba: 1, 0, 1 ,0.4
                Rectangle:
                    size: self.size
                    pos: self.pos

            orientation: 'horizontal'
            size_hint: 1, None
            pos_hint: {'top': 1}
            height: 44

            Label:
                height: 24
                text_size: self.width, None
                text: 'Date: ' + root.my_text

            Label:
                height: 24
                text_size: self.width, None
                text: 'Time: ' + root.my_text_2

        BoxLayout:
            padding: 3
            GridLayout:
                cols: 1
                size: root.width, root.height
            
                GridLayout:
                    cols: 2
                    Label:
                        text:'Cage Number'
                    TextInput:
                        id: cage_number
                        multiline: False
                        text: root.manager.cage_ids
                        readonly:True
                    Label:
                        text:'Animal ID/name'
                    # TextInput:
                    #     id: animal_id
                    #     multiline: False
                    Spinner:
                        id: animal_id
                        size_hint: 0.5,0.1
                        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                        text: "Select Animal By Color" 
                        values:['Red', 'Yellow', 'Blue', 'Green'] 
                        on_text: root.spinner_clicked_anim(animal_id.text)
                    Label:
                        text:'Event Category'
                    TextInput:
                        id: event_category
                        multiline: False
                        text: root.manager.my_global
                        readonly:True
                    Label:
                        text:'Type'
                    Spinner:
                        id: anim_type
                        size_hint: 0.5,0.1
                        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                        text: "Select Event Type" 
                        values:['Oral dose', 'Injection', 'Length Measurement', 'Weight Measurement'] 
                        on_text: root.spinner_clicked(anim_type.text)
                    # TextInput:
                    #     id: anim_type
                    #     multiline: False 
                    Label: 
                        text:'Duration'
                    TextInput:
                        id: duration
                        hint_text: "Type hour of time e.g. 11 (24 hour system)"
                        multiline: False
                    Label:
                        text:'Date'
                    DatePicker:
                        pHint: 1,1
                        size_hint_x: .4
                        id: date
                        multiline: False
                    Label:
                        text:'Weight'
                    TextInput:
                        id: weight
                        multiline: False
                    Label:
                        text:'Length'
                    TextInput:
                        id: length
                        multiline: False 
                    Label:
                        text:'Dosage'
                    TextInput:
                        id: dosage
                        multiline: False
                    Label:
                        text:'Description'
                    TextInput:
                        id: description
                        multiline: False 
                    Label:
                        text:'Recorded_by'
                    TextInput:
                        id: recorded_by
                        multiline: False 
                    Button: 
                        text: 'Back'
                        on_release: 
                            app.root.current = "grid"
                            root.manager.transition.direction = "right"
                    Button: 
                        text: 'Finish'
                        on_press: root.show_popup_1()
                        # on_release: 
                            # root.show_popup()
                            # app.root.current = "welcome"
                            # root.manager.transition.direction = "left"


<CageWindow>:
    name: "cage"
    cage_number: cage_number
    event_category: event_category
    duration: duration
    date: date
    description: description
    recorded_by: recorded_by
    cage_type: cage_type


    BoxLayout:
        canvas.before:
            Color:
                rgba: 0, 0, 0 ,1
            Rectangle:
                size: self.size
                pos: self.pos

    GridLayout:
        rows: 2
        spacing: 1.5
        BoxLayout:
            canvas.before:
                Color:
                    rgba: 1, 0, 1 ,0.4


                Rectangle:
                    size: self.size
                    pos: self.pos

            orientation: 'horizontal'
            size_hint: 1, None
            pos_hint: {'top': 1}
            height: 44

            Label:
                height: 24
                text_size: self.width, None
                text: 'Date: ' + root.my_text

            Label:
                height: 24
                text_size: self.width, None
                text: 'Time: ' + root.my_text_2

        BoxLayout:
            padding: 3
            GridLayout:
                cols: 1
                size: root.width, root.height
            
                GridLayout:
                    cols: 2
                    Label:
                        text:'Cage Number'
                    TextInput:
                        id: cage_number
                        multiline: False
                        text: root.manager.cage_ids
                        readonly:True
                    Label:
                        text:'Event Category'
                    TextInput:
                        id: event_category
                        multiline: False
                        text: root.manager.my_global
                        readonly:True
                    Label:
                        text:'Type'
                    Spinner:
                        id: cage_type
                        size_hint: 0.5,0.1
                        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                        text: "Select Event Type" 
                        values:['Cage clean', 'Cage Move'] 
                        on_text: root.spinner_clicked(cage_type.text)
                    # TextInput:
                    #     id: cage_type
                    #     multiline: False 
                    Label:
                        text:'Duration'
                    TextInput:
                        id: duration
                        hint_text: "Type hour of time e.g. 11 (24 hour system)"
                        multiline: False
                    Label:
                        text:'Date'
                    DatePicker:
                        pHint: 1,1
                        size_hint_x: .4
                        id: date
                        multiline: False
                    Label:
                        text:'Description'
                    TextInput:
                        id: description 
                        multiline: False 
                    Label:
                        text:'Recorded_by'
                    TextInput:
                        id: recorded_by
                        multiline: False 
                    Button: 
                        text: 'Back'
                        on_release: 
                            app.root.current = "grid2"
                            root.manager.transition.direction = "right"
                    Button: 
                        text: 'Finish'
                        on_press: root.show_popup_1()
                        # on_release: 
                        #     # root.show_popup()
                        #     app.root.current = "welcome"
                        #     root.manager.transition.direction = "left"


<RoomLevelWindow>:
    name: "room"
    event_category: event_category
    duration: duration
    date: date
    description: description
    recorded_by: recorded_by
    room_type: room_type

    # canvas.before:
    #     Color:
    #         rgba: 0,0,0,1
    BoxLayout:
        canvas.before:
            Color:
                rgba: 0, 0, 0 ,1
            Rectangle:
                size: self.size
                pos: self.pos

    GridLayout:
        rows: 2
        spacing: 1.5
        BoxLayout:
            canvas.before:
                Color:
                    rgba: 1, 0, 1 ,0.4
                Rectangle:
                    size: self.size
                    pos: self.pos

            orientation: 'horizontal'
            size_hint: 1, None
            pos_hint: {'top': 1}
            height: 44

            Label:
                height: 24
                text_size: self.width, None
                text: 'Date: ' + root.my_text

            Label:
                height: 24
                text_size: self.width, None
                text: 'Time: ' + root.my_text_2

        BoxLayout:
            padding: 3
            GridLayout:
                cols: 1
                size: root.width, root.height
            
                GridLayout:
                    cols: 2
                    Label:
                        text:'Event Category'
                    TextInput:
                        id: event_category
                        multiline: False
                        text: root.manager.my_global 
                        readonly: True
                    Label:
                        text:'Type'
                    Spinner:
                        id: room_type
                        size_hint: 0.5,0.1
                        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                        text: "Select Event Type" 
                        values:['Room clean', 'Noise Alarm', 'Fallen Object'] 
                        on_text: root.spinner_clicked(room_type.text)
                    # TextInput:
                    #     id: room_type
                    #     multiline: False 
                    Label:
                        text:'Duration'
                    TextInput:
                        id: duration
                        hint_text: "Type hour of time e.g. 11 (24 hour system)"
                        multiline: False
                    Label:
                        text:'Date'
                    DatePicker:
                        pHint: 1,1
                        size_hint_x: .4
                        id: date
                        multiline: False
                    Label:
                        text:'Description'
                    TextInput:
                        id: description
                        multiline: False 
                    Label:
                        text:'Recorded_by'
                    TextInput:
                        id: recorded_by
                        multiline: False 
                    Button: 
                        text: 'Back'
                        on_release: 
                            app.root.current = "eventgrid"
                            root.manager.transition.direction = "right"
                    Button: 
                        text: 'Finish'
                        on_press: root.show_popup_1()
                        # on_press: root.show_popup()
                        # on_release: root.press_two()
                        # on_release:
                        #     # root.show_popup()
                        #     app.root.current = "welcome"
                        #     root.manager.transition.direction = "left"



<AddEventWindow>:
    name: "add"
    event_category: event_category
    event_name: event_name
    date: date
    time: time
    description: description
    created_by: created_by
    BoxLayout:
        canvas.before:
            Color:
                rgba: 0, 0, 0 ,1
            Rectangle:
                size: self.size
                pos: self.pos
    GridLayout:
        rows: 2
        spacing: 1.5
        BoxLayout:
            canvas.before:
                Color:
                    rgba: 1, 0, 1 ,0.4
                Rectangle:
                    size: self.size
                    pos: self.pos

            orientation: 'horizontal'
            size_hint: 1, None
            pos_hint: {'top': 1}
            height: 44

            Label:
                height: 24
                text_size: self.width, None
                text: 'Date: ' + root.my_text

            Label:
                height: 24
                text_size: self.width, None
                text: 'Time: ' + root.my_text_2

        BoxLayout:
            padding: 3
            GridLayout:
                cols: 1
                size: root.width, root.height
            
                GridLayout:
                    cols: 2
                    Label:
                        text:'Event Category'
                    Spinner:
                        id: event_category
                        size_hint: 0.5,0.1
                        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                        text: "Select Event Category" 
                        values:['Individual Animal', 'Room Level', 'Cage'] 
                        on_text: root.spinner_clicked(event_category.text)
                    Label:
                        text:'Event Name'
                    TextInput:
                        id: event_name
                        multiline: False
                    Label:
                        text:'Date'
                    DatePicker:
                        pHint: 1,1
                        size_hint_x: .4
                        id: date
                        multiline: False
                    Label:
                        text:'Time'
                    TextInput:
                        id: time 
                        hint_text: "Type hour of time e.g. 11 (24 hour system)"
                        multiline: False
                    Label:
                        text:' Event Description'
                    TextInput:
                        id: description
                        multiline: False 
                    Label:
                        text:'Created by'
                    TextInput:
                        id: created_by
                        multiline: False 
                    Button: 
                        text: 'Cancel'
                        on_release: 
                            app.root.current = "welcome"
                            root.manager.transition.direction = "right"
                    Button: 
                        text: 'Done'
                        on_press: root.show_popup_1()
                        # on_release: 
                        #     # root.show_popup()
                        #     app.root.current = "welcome"
                        #     root.manager.transition.direction = "left"